(function(){var e=this.syaberi!=null?this.syaberi:this.syaberi={};e.Chatroom=Backbone.Model.extend({id:null,title1:null,title2:null,description:null,categoryId:null,userId:null,publicYN:null,validation:{categoryId:[{required:!0,msg:"カテゴリを選択してください"}],title1:[{required:!0,msg:"部屋名を入力してください"},{rangeLength:[0,100],msg:"部屋名は100文字以下で入力してください"}],title2:[{required:!0,msg:"部屋名を入力してください"},{rangeLength:[0,100],msg:"部屋名は100文字以下で入力してください"}],description:[],publicYN:[{required:!0,msg:"公開設定を選択してください"}]},url:"/chatrooms"}),e.Chatrooms=Backbone.Collection.extend({model:e.Chatroom,url:"/chatrooms",nextPage:2,parse:function(e){return this.nextPage=e.nextPage,e.chatrooms}})}).call(this),function(){var e=this.syaberi!=null?this.syaberi:this.syaberi={};e.CreateChatroomView=Backbone.View.extend({el:$("html"),events:{"click #submit_1":"submit","blur input.title":"setSearchText","focus input.title":"clearSearchText"},initialize:function(){this.model=new e.Chatroom,Backbone.Validation.bind(this)},submit:function(e){e.preventDefault();var t=this;this._clearSearchText($("#title1")),this._clearSearchText($("#title2"));var n=$.trim($("#categoryId").val()),r=$.trim($("#title1").val()),i=$.trim($("#title2").val()),s=$.trim($("#description").val()),o=$("#publicYN").val();this.model.set({categoryId:n,title1:r,title2:i,description:s,publicYN:o});if(this.model.isValid()){var u=r+"けど、"+i+"について、話しませんか？";this.model.save({categoryId:n,title:u,description:s,publicYN:o},{success:function(e,t){var n=t.chatroomId;location.href="/chatrooms/"+n},error:function(e,t){alert(t.responseText)}})}this.model.bind("validated:invalid",function(e,n){for(key in n){var r=n[key];if(key==="title1"||key==="title2")key="title";$("#error_"+key).text(r)}t._setSearchText($("#title1")),t._setSearchText($("#title2"))})},clearSearchText:function(e){var t=$(e.target);this._clearSearchText(t)},_clearSearchText:function(e){e.val()===e.prop("defaultValue")&&e.css("color","#000").val("")},setSearchText:function(e){var t=$(e.target);this._setSearchText(t)},_setSearchText:function(e){$.trim(e.val())===""&&e.css("color","#999").val(e.prop("defaultValue"))},render:function(){}})}.call(this),function(){var e=this.syaberi!=null?this.syaberi:this.syaberi={};$(function(){var t=new e.CreateChatroomView;t.render(),Backbone.emulateHTTP=!0})}.call(this);