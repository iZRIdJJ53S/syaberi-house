(function(){var e=this.syaberi!=null?this.syaberi:this.syaberi={};e.User=Backbone.Model.extend({id:null,userName:null,email:null,validation:{userName:[{required:!0,msg:"ニックネームを入力してください"},{rangeLength:[1,255],msg:"ニックネームは255文字以下で入力してください"}],email:[{required:!0,msg:"メールアドレスを入力してください"},{pattern:"email",msg:"メールアドレスの形式が不正です。"},{rangeLength:[3,255],msg:"メールアドレスは3文字以上255文字以下で入力してください"}]},url:"/users"}),e.Users=Backbone.Collection.extend({model:e.User,url:"/users"})}).call(this),function(){var e=this.syaberi!=null?this.syaberi:this.syaberi={};e.RegisterView=Backbone.View.extend({el:$("html"),events:{"click #submit_1":"submit"},initialize:function(){this.model=new e.User,Backbone.Validation.bind(this)},submit:function(e){e.preventDefault();var t=$.trim($("#userName").val()),n=$.trim($("#email").val()),r=$("#terms_check").is(":checked");r?(this.model.set({userName:t,email:n}),this.model.isValid()&&this.model.save({userName:t,email:n},{success:function(){var e=$.cookie("returnUrl");location.href=e},error:function(e,t){alert(t.responseText)}}),this.model.bind("validated:invalid",function(e,t){for(key in t)$("#error_"+key).text(t[key])})):alert("利用規約に同意する必要があります")},render:function(){}})}.call(this),function(){var e=this.syaberi!=null?this.syaberi:this.syaberi={};$(function(){var t=new e.RegisterView;t.render(),Backbone.emulateHTTP=!0})}.call(this);